# React & Redux

---

## **Next.js란?**

**Next.js**는 React로는 구현하기 어려웠던 서버사이드 렌더링(SSR)과 정적 사이트 생성(SSG) 등  
다양한 렌더링 방식으로 배포를 가능하게 해주는 React 프레임워크이다.

---

## **서버사이드 렌더링(SSR) vs. 클라이언트사이드 렌더링(CSR)**

- **서버사이드 렌더링(SSR)**  
  사용자가 요청을 보낼 때마다 서버에서 페이지를 생성하여 클라이언트에 전달하는 방식  
  페이지가 사용자에게 전달될 때는 이미 HTML이 완성되어 있으므로 SEO에 유리하고, 초기 로딩 속도가 빠르다.  
  그러나 요청마다 서버에서 페이지를 생성하므로, 서버 부하가 커질 수 있다.

- **클라이언트사이드 렌더링(CSR)**  
  클라이언트(브라우저)에서 JavaScript를 사용해 페이지를 렌더링하는 방식  
  초기 로딩 시에는 최소한의 HTML과 JavaScript만 제공되며, 이후 필요한 데이터를 가져와 렌더링을 완료한다.  
  CSR 방식은 초기 로딩이 느릴 수 있지만, 이후의 페이지 전환이 부드럽고 빠르며, SPA(Single Page Application)에서 주로 사용된다.

---

## **Next.js의 프리렌더링 방식**

- React는 대표적인 SPA 방식의 라이브러리이고,  
  Next.js는 React를 기반으로하는 SSR 렌더링 지원 프레임워크라면,  
  **Next.js는 SPA일까? MPA일까?**  
  ➡ Next.js는 **프리렌더링 방식을 사용함으로써** SPA와 MPA 방식 모두 사용한다!

- **프리렌더링이란?**  
  프리렌더링은 서버에서 미리 HTML을 생성하여 클라이언트에 전달하는 방식이다.  
  이로 인해 브라우저는 완전히 비어있는 HTML 파일을 받아오는 대신,  
  기본적인 콘텐츠가 렌더링된 HTML을 먼저 받아와 초기 화면을 렌더링할 수 있다.  
  이후 자바스크립트 파일이 로드되면 해당 페이지가 상호작용이 가능한 SPA처럼 작동하며 동적인 기능이 추가된다.

- **프리렌더링 방식의 종류**

  - **정적 생성(Static Generation)**  
    빌드할 때 페이지를 생성하여 정적 파일로 저장  
    이후 요청 시 생성된 정적 파일을 전달하므로, 빠른 로딩 속도를 제공함  
    SSR 방식 보다 성능이 좋아 **Next.js에서는 SSG 방식을 권장**

  - **서버사이드 렌더링(Server-Side Rendering)**  
    요청이 있을 때마다 서버에서 페이지를 생성하여 사용자에게 전달

---

## **Next.js 12 vs. Next.js 13**

### 1. 라우팅 방식

- **Next.js 12**  
  기존의 폴더 기반의 파일 시스템 라우팅 방식을 사용하며, 각 페이지가 개별적으로 `pages` 폴더 안에서 관리된다.
- **Next.js 13**  
  새로운 **App Router**의 도입으로 폴더 구조가 더 자유로워졌으며, `app` 디렉토리에서 라우팅을 정의할 수 있다.  
  폴더 기반 라우팅을 강화하여 동적 경로 및 중첩 레이아웃을 쉽게 구성할 수 있다.

### 2. Data Fetching

- **Next.js 12**  
  `getStaticProps`, `getServerSideProps`, `getStaticPaths` 함수를 사용하여 SSG와 SSR 데이터를 관리
- **Next.js 13**  
  새로운 데이터 패칭 방법이 도입되었으며, `use`, `fetch` 및 React Server Components를 지원하여 서버와 클라이언트 간의 데이터 관리가 간소화되었다.  
  페이지와 컴포넌트마다 독립적으로 데이터를 패칭할 수 있습니다.

### 3. 서버 작성 방법

- **Next.js 12**  
  서버 관련 로직을 `api` 폴더 내부의 엔드포인트에서 작성하여 서버 기능을 구현한다.
- **Next.js 13**  
  App Router와 함께 API 라우팅을 개선했으며, `route.js` 파일을 통해 더 세밀한 서버 로직 구성이 가능하다.  
  특정 라우트 파일에서 서버 로직을 작성할 수 있어 API 개발이 더욱 간편하다.

### 4. 레이아웃 작성 방법

- **Next.js 12**  
  레이아웃은 각 페이지 컴포넌트에서 설정하며, `pages/_app.js`를 통해 전체 애플리케이션의 공통 레이아웃을 정의할 수 있다.
- **Next.js 13**  
  레이아웃 기능이 강화되어 **Nested Layout**(중첩 레이아웃)을 손쉽게 사용할 수 있다.  
  각 폴더에 `layout.js` 파일을 생성하여 폴더별 레이아웃을 정의할 수 있으며, 동적 라우팅과 중첩된 페이지 구조에 맞는 레이아웃 구성이 가능해졌다.

---
